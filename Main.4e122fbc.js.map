{"version":3,"sources":["src/BaseElement.ts","src/YoutubeVideo.ts","src/ActionNetworkForm.ts","src/Main.ts"],"names":[],"mappings":";;AEAA,ACAA,AFAA;;ACEA,ACDA,AFCA,MCAM,ADAA,KAAK,GAAG,CAAC,GAAD,EAAc,GCA5B,ADAc,EAA2B,KAA3B,ECAkB,GDA0B,qBCA1D,CAA2C;AAC/B,ADAV,ECAU,ODAH,IAAI,CAAC,GAAL,CCAmB,ADAV,GCAU,CAEzB,ADFmB,CAAC,GAAL,CAAS,GAAT,EAAc,KAAd,CAAT,EAA+B,GAA/B,CAAP;AEAF,AFCC,CAFD,KECM,KAAK,GAAG,QAAQ,CAAC,aAAT,CAAuB,eAAvB,CAAd;ADkBS,AFrBH,EEqBG,IFrBa,WAAhB,EEqBoB,GAAA,IFrBgB,WAApC,CAA+C;AEsBjD,AFrBF,ACSF,EDTE,ICSI,ICYI,GFrBR,GAAA,ECSF,SCYI,ADZuB,wBAA3B,CAAsC;ACalC,AFrBA,ACQJ,EAAA,QCaU,GDbV,GCagB,ADbhB,GCamB,QAAQ,CAAC,aAAT,CAAuB,QAAvB,CAAf;AACA,AFrBA,IEqBA,KFrBK,CEqBC,CAAC,MAAP,GAAgB,CFrBhB,CAAkB,GEqBG,gBAAL,EAAhB;AACA,AFtBoB,ACQd,MDRc,GEsBf,ADdC,CDRkB,EAAE,ICQpB,GCcN,ADdwB,CCcP,CDdX,KCcN,CAAwB,MAAxB;AACD,AFvBmB,ACSZ,KDTN,ICSM,YAAA,GAAuB,CAAvB;ADRN,ACSM,SDTD,ACSC,SDTN,CCSM,GAA4B,IAA5B;ACeA,AFvBP,ACSO,ECcA,ODdA,MAAA,GCcgB,ADdC,CAAjB,ECcgB;AACtB,ADdM,SAAA,ECcC,MDdD,GAAoB,IAApB;ADJD,ACKC,EDLD,OCKC,UDLgB,GAAA,CCKhB,GAA0B,KAA1B;ADJN,ACKM,SDLD,ACKC,eAAA,CDLN,ECKiC,KAA3B;ADJP,ACKO,SAAA,QAAA,GAAoB,KAApB;AACA,SAAA,SAAA,GAA4B,QAAQ,CAAC,aAAT,CAAuB,KAAvB,CAA5B;ADJA,EAAA,SAAS,GAAA;AACf,AC+HM,QD/HF,CC+HE,QAAA,GAAW,MAAK,MD/HM,KAAK,UAAjC,EAA8C;AAC5C,AC+HF,YD/HQ,EC+HA,GD/HK,EC+HA,CD/HG,IAAI,CC+HZ,CAAa,WD/HL,EAAd,CC+HM,EAAR;AD9HE,AC+H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","file":"Main.4e122fbc.js","sourceRoot":"..","sourcesContent":["export abstract class BaseElement extends HTMLElement {\n  constructor() {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.addStyles()\n  }\n\n  protected static styles: string = ''\n\n  protected abstract importAttributes(): void\n\n  public connectedCallback() {\n    this.importAttributes()\n  }\n\n  private addStyles() {\n    if ('adoptedStyleSheets' in this.shadowRoot!) {\n      const sheet = new CSSStyleSheet()\n      sheet.replaceSync((this.constructor as typeof BaseElement).styles)\n      this.shadowRoot!.adoptedStyleSheets = [sheet]\n    } else {\n      const node = document.createElement('style')\n      node.textContent = (this.constructor as typeof BaseElement).styles\n      this.shadowRoot!.appendChild(node)\n    }\n  }\n}","import { BaseElement } from './BaseElement'\n\nconst clamp = (min: number, max: number, value: number) => {\n  return Math.min(Math.max(min, value), max)\n}\n\ninterface HTMLElementTagNameMap {\n  'youtube-video': YoutubeVideo\n}\n\nclass YoutubeVideo extends BaseElement {\n  private videoId: string = ''\n  private startSeconds: number = 0\n  private endSeconds: number | null = null\n  private volume: number = 0\n  private controls: boolean = true\n  private modestBranding: boolean = false\n  private disableKeyboard: boolean = false\n  private autoplay: boolean = false\n  private container: HTMLDivElement = document.createElement('div')\n  private player?: YT.Player\n\n  protected importAttributes() {\n    this.videoId = this.getAttribute('video-id') || ''\n    this.startSeconds = parseInt(this.getAttribute('start-seconds') || '0') || 0\n    this.endSeconds = parseInt(this.getAttribute('end-seconds') || '') || null\n    this.controls = this.getAttribute('controls') !== 'false'\n    this.modestBranding = this.getAttribute('modest-branding') === 'true'\n    this.disableKeyboard = this.getAttribute('keyboard') === 'false'\n    this.autoplay = this.getAttribute('autoplay') === 'true'\n    this.volume = this.parseVolume(this.getAttribute('volume') || '100')\n  }\n\n  protected static styles = `\n    :host {\n        display: inline-block;\n        width: 644px;\n        height: 362px;\n        position: relative;\n    }\n    iframe {\n      width: 100%;\n      height: 100%;\n      border: 0;\n    }\n  `\n\n  public static get observedAttributes() {\n    return [\n      'volume',\n    ]\n  }\n\n  public attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ) {\n    switch (name) {\n      case 'volume':\n        if (oldValue === newValue) return\n        this.volume = this.parseVolume(newValue || '100')\n        this.player && this.player.setVolume(this.volume)\n        return\n      default:\n        return\n    }\n  }\n\n  public async connectedCallback() {\n    super.connectedCallback()\n    this.shadowRoot!.appendChild(this.container)\n    await this.loadYoutubeIframeApi()\n    this.player = await this.createPlayer()\n    this.loadRequestedVideo()\n    this.player.setVolume(this.volume)\n  }\n\n  private parseVolume(attrValue: string) {\n    const parsed = parseInt(attrValue)\n    return isNaN(parsed) ? 100 : clamp(0, 100, parsed)\n  }\n\n  private loadRequestedVideo() {\n    this.player!.loadVideoById({\n      videoId: this.videoId,\n      startSeconds: this.startSeconds,\n      endSeconds: this.endSeconds || undefined,\n      playerVars: {\n        autoplay: this.autoplay,\n        controls: this.controls ? 1 : 0,\n        modestbranding: this.modestBranding ? 1 : 0,\n        disablekb: this.disableKeyboard ? 1 : 0,\n      },\n    })\n  }\n\n  private loadYoutubeIframeApi(): Promise<void> {\n    return new Promise((resolve) => {\n      if (typeof YT === 'object' && YT !== null && YT.loaded === 1) {\n        resolve()\n        return\n      }\n\n      window.addEventListener('youtubeiframeapiready', () => {\n        resolve()\n      }, { once: true })\n\n      if (typeof window.onYouTubeIframeAPIReady !== 'function') {\n        window.onYouTubeIframeAPIReady = () => {\n          YT.ready(() => {\n            setTimeout(() => {\n              window.dispatchEvent(new CustomEvent('youtubeiframeapiready'))\n            })\n          })\n        }\n      }\n\n      if (document.getElementById('youtube-iframe-api') === null) {\n        const script = document.createElement('script')\n        script.src = 'https://www.youtube.com/iframe_api'\n        script.id = 'youtube-iframe-api'\n        script.async = true\n        document.head.appendChild(script)\n      }\n    })\n  }\n\n  private createPlayer(): Promise<YT.Player> {\n    return new Promise((resolve) => {\n      new YT.Player(this.container, {\n        videoId: this.videoId,\n        playerVars: {\n          controls: this.controls ? 1 : 0,\n        },\n        events: {\n          onReady: (e: CustomEvent) => resolve(e.target as YT.Player),\n          onStateChange: this.onChange,\n        }\n      })\n    })\n  }\n\n  private onChange = () => {\n    switch (this.player!.getPlayerState()) {\n      case YT.PlayerState.UNSTARTED:\n        this.setAttribute('player-state', 'unstarted')\n        return\n      case YT.PlayerState.PLAYING:\n        this.setAttribute('player-state', 'playing')\n        this.dispatchEvent(new CustomEvent('playing'))\n        return\n      case YT.PlayerState.ENDED:\n        this.setAttribute('player-state', 'ended')\n        this.dispatchEvent(new CustomEvent('ended'))\n        return\n      case YT.PlayerState.PAUSED:\n        this.dispatchEvent(new CustomEvent('paused'))\n      default:\n        return\n    }\n  }\n}\n\ncustomElements.define('youtube-video', YoutubeVideo)","import { BaseElement } from './BaseElement'\n\nclass ActionNetworkForm extends BaseElement {\n  protected importAttributes() {\n\n  }\n\n  protected static styles = `\n    :host {\n      display: block;\n      min-content;\n    }\n    iframe {\n      height: 100%;\n      width: 100%;\n      display: block;\n      border: 0;\n      background-color: white;\n    }\n  `\n\n  public connectedCallback() {\n    super.connectedCallback()\n    const iframe = document.createElement('iframe')\n    iframe.srcdoc = this.createIframeHtml()\n    this.shadowRoot!.append(iframe)\n  }\n\n  private createIframeHtml() {\n    return `\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset=\"utf-8\" />\n          <style>\n            h2 { display: none; }\n          </style>\n        </head>\n        <body>\n          <script src=\"https://actionnetwork.org/widgets/v3/form/join-us-in-detroit-to-changethedebate?format=js&source=widget\"></script>\n          <div id=\"can-form-area-join-us-in-detroit-to-changethedebate\"></div>\n        </body>\n      </html>\n    `\n  }\n}\n\ncustomElements.define('action-network-form', ActionNetworkForm)","import './YoutubeVideo'\nimport './ActionNetworkForm'\n\nconst video = document.querySelector('youtube-video')!"]}