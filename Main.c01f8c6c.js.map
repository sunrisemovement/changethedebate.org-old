{"version":3,"sources":["src/BaseElement.ts","src/YoutubeVideo.ts","src/ActionNetworkForm.ts","src/Main.ts"],"names":[],"mappings":"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","file":"Main.c01f8c6c.js","sourceRoot":"..","sourcesContent":["export abstract class BaseElement extends HTMLElement {\n  constructor() {\n    super()\n    this.attachShadow({ mode: 'open' })\n    this.addStyles()\n  }\n\n  protected static styles: string = ''\n\n  protected abstract importAttributes(): void\n\n  public connectedCallback() {\n    this.importAttributes()\n  }\n\n  public disconnectedCallback() {\n    \n  }\n\n  private addStyles() {\n    if ('adoptedStyleSheets' in this.shadowRoot!) {\n      const sheet = new CSSStyleSheet()\n      sheet.replaceSync((this.constructor as typeof BaseElement).styles)\n      this.shadowRoot!.adoptedStyleSheets = [sheet]\n    } else {\n      const node = document.createElement('style')\n      node.textContent = (this.constructor as typeof BaseElement).styles\n      this.shadowRoot!.appendChild(node)\n    }\n  }\n}","import { BaseElement } from './BaseElement'\n\nconst clamp = (min: number, max: number, value: number) => {\n  return Math.min(Math.max(min, value), max)\n}\n\ninterface HTMLElementTagNameMap {\n  'youtube-video': YoutubeVideo\n}\n\nclass YoutubeVideo extends BaseElement {\n  private videoId: string = ''\n  private startSeconds: number = 0\n  private endSeconds: number | null = null\n  private volume: number = 0\n  private controls: boolean = true\n  private modestBranding: boolean = false\n  private disableKeyboard: boolean = false\n  private autoplay: boolean = false\n  private container: HTMLDivElement = document.createElement('div')\n  private player?: YT.Player\n\n  protected importAttributes() {\n    this.videoId = this.getAttribute('video-id') || ''\n    this.startSeconds = parseInt(this.getAttribute('start-seconds') || '0') || 0\n    this.endSeconds = parseInt(this.getAttribute('end-seconds') || '') || null\n    this.controls = this.getAttribute('controls') !== 'false'\n    this.modestBranding = this.getAttribute('modest-branding') === 'true'\n    this.disableKeyboard = this.getAttribute('keyboard') === 'false'\n    this.autoplay = this.getAttribute('autoplay') === 'true'\n    this.volume = this.parseVolume(this.getAttribute('volume') || '100')\n  }\n\n  protected static styles = `\n    :host {\n        display: inline-block;\n        width: 644px;\n        height: 362px;\n        position: relative;\n    }\n    iframe {\n      width: 100%;\n      height: 100%;\n      border: 0;\n    }\n  `\n\n  public static get observedAttributes() {\n    return [\n      'volume',\n    ]\n  }\n\n  public attributeChangedCallback(\n    name: string,\n    oldValue: string | null,\n    newValue: string | null\n  ) {\n    switch (name) {\n      case 'volume':\n        if (oldValue === newValue) return\n        this.volume = this.parseVolume(newValue || '100')\n        this.player && this.player.setVolume(this.volume)\n        return\n      default:\n        return\n    }\n  }\n\n  public async connectedCallback() {\n    super.connectedCallback()\n    this.shadowRoot!.appendChild(this.container)\n    await this.loadYoutubeIframeApi()\n    this.player = await this.createPlayer()\n    this.loadRequestedVideo()\n    this.player.setVolume(this.volume)\n  }\n\n  private parseVolume(attrValue: string) {\n    const parsed = parseInt(attrValue)\n    return isNaN(parsed) ? 100 : clamp(0, 100, parsed)\n  }\n\n  private loadRequestedVideo() {\n    this.player!.loadVideoById({\n      videoId: this.videoId,\n      startSeconds: this.startSeconds,\n      endSeconds: this.endSeconds || undefined,\n      playerVars: {\n        autoplay: this.autoplay,\n        controls: this.controls ? 1 : 0,\n        modestbranding: this.modestBranding ? 1 : 0,\n        disablekb: this.disableKeyboard ? 1 : 0,\n      },\n    })\n  }\n\n  private loadYoutubeIframeApi(): Promise<void> {\n    return new Promise((resolve) => {\n      if (typeof YT === 'object' && YT !== null && YT.loaded === 1) {\n        resolve()\n        return\n      }\n\n      window.addEventListener('youtubeiframeapiready', () => {\n        resolve()\n      }, { once: true })\n\n      if (typeof window.onYouTubeIframeAPIReady !== 'function') {\n        window.onYouTubeIframeAPIReady = () => {\n          YT.ready(() => {\n            setTimeout(() => {\n              window.dispatchEvent(new CustomEvent('youtubeiframeapiready'))\n            })\n          })\n        }\n      }\n\n      if (document.getElementById('youtube-iframe-api') === null) {\n        const script = document.createElement('script')\n        script.src = 'https://www.youtube.com/iframe_api'\n        script.id = 'youtube-iframe-api'\n        script.async = true\n        document.head.appendChild(script)\n      }\n    })\n  }\n\n  private createPlayer(): Promise<YT.Player> {\n    return new Promise((resolve) => {\n      new YT.Player(this.container, {\n        videoId: this.videoId,\n        playerVars: {\n          controls: this.controls ? 1 : 0,\n        },\n        events: {\n          onReady: (e: CustomEvent) => resolve(e.target as YT.Player),\n          onStateChange: this.onChange,\n        }\n      })\n    })\n  }\n\n  private onChange = () => {\n    switch (this.player!.getPlayerState()) {\n      case YT.PlayerState.UNSTARTED:\n        this.setAttribute('player-state', 'unstarted')\n        return\n      case YT.PlayerState.PLAYING:\n        this.setAttribute('player-state', 'playing')\n        this.dispatchEvent(new CustomEvent('playing'))\n        return\n      case YT.PlayerState.ENDED:\n        this.setAttribute('player-state', 'ended')\n        this.dispatchEvent(new CustomEvent('ended'))\n        return\n      case YT.PlayerState.PAUSED:\n        this.dispatchEvent(new CustomEvent('paused'))\n      default:\n        return\n    }\n  }\n}\n\ncustomElements.define('youtube-video', YoutubeVideo)","import { BaseElement } from './BaseElement'\n\nclass ActionNetworkForm extends BaseElement {\n  private _actionId: string | null = null\n  private _iframe!: HTMLIFrameElement\n  private _showActionName: boolean = true\n  private _showActionNetworkLogo: boolean = true\n  private _theme: string = 'light'\n\n  protected importAttributes() {\n    this.actionId = this.getAttribute('action-id')\n    this._showActionName = this.getAttribute('show-action-name') !== 'false'\n    this._showActionNetworkLogo = this.getAttribute('show-action-network-logo') !== 'false'\n    this._theme = this.getAttribute('theme') === 'dark' ? 'dark' : 'light'\n  }\n\n  protected static styles = `\n    :host {\n      display: block;\n      position: relative;\n    }\n    iframe {\n      border: 0;\n      width: 100%;\n      position: relative;\n      display: block;\n    }\n  `\n\n  public get actionId(): string | null {\n    return this.getAttribute('action-id')\n  }\n\n  public set actionId(value: string | null) {\n    const current = this.getAttribute('action-id')\n    if (value === current) return\n    if (value === null) this.removeAttribute('action-id')\n    else this.setAttribute('action-id', value)\n  }\n\n  public connectedCallback() {\n    super.connectedCallback()\n    if (this.actionId) this.injectForm()\n  }\n\n  public disconnectedCallback() {\n    super.disconnectedCallback()\n    window.removeEventListener('resize', this.setIframeHeight)\n  }\n\n  private injectForm() {\n    this._iframe = document.createElement('iframe')\n    this._iframe.setAttribute('loading', 'lazy')\n    this._iframe.srcdoc = this.createIframeContent()\n    this._iframe.addEventListener('load', this.onIframeLoad)\n    this.shadowRoot!.append(this._iframe)\n  }\n\n  private onIframeLoad = () => {\n    this._iframe.contentWindow!.addEventListener('needsresize', this.setIframeHeight)\n  }\n\n  private setIframeHeight = () => {\n    this._iframe.style.height = this._iframe.contentDocument!.body.scrollHeight + 'px'\n  }\n\n  private createIframeContent() {\n    return `<!DOCTYPE html>\n<html>\n<head>\n  <link href=\"https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap\" rel=\"stylesheet\">\n  <script async src=\"https://actionnetwork.org/widgets/v3/form/${this.actionId}?format=js&source=widget\"></script>\n  <style>\n    :root {\n      --sunrise-yellow: #ffde16;\n      --sunrise-charcoal: #33342e;\n      --sunrise-magenta: #8f0d56;\n      --sunrise-orange: #fd9014;\n    }\n    * {\n      box-sizing: border-box;\n    }\n    body {\n      font-family: Source Sans Pro;\n      margin: 0;\n      color: ${this._theme === 'dark' ? '#ffffff' : 'var(--sunrise-charcoal)'};\n      position: relative;\n      padding: 16px;\n    }\n    h2 {\n      margin: 0;\n      display: ${this._showActionName ? 'block' : 'none'};\n    }\n    h4 {\n      margin: 0;\n    }\n    #logo_wrap {\n      display: ${this._showActionNetworkLogo ? 'block' : 'none'};\n    }\n    li.form_builder_output {\n      list-style: none;\n    }\n    li.core_field {\n      list-style: none;\n      padding: 8px 0;\n    }\n    li.control-group input[type=\"text\"],\n    li.control-group input[type=\"email\"],\n    li.core_field input[type=\"text\"],\n    li.core_field input[type=\"email\"] {\n      width: 100%;\n      height: 48px;\n      border: 0;\n      outline: 0;\n      border-radius: 8px;\n      padding: 0 16px;\n      font-size: 16px;\n      font-family: inherit;\n    }\n    li.control-group {\n      list-style: none;\n      display: flex;\n      flex-direction: column;\n      padding: 8px 0;\n    }\n    li.control-group label {\n      font-size: 14px;\n      padding-bottom: 4px;\n      padding-left: 16px;\n    }\n    .international_link-wrap {\n      display: block;\n      color: #ffde16;\n      padding: 8px 0;\n      cursor: pointer;\n    }\n    .can_select {\n      width: 100%;\n      display: block;\n      height: 48px;\n      border: 0;\n      outline: 0;\n      cursor: pointer;\n      font-size: 16px;\n      padding: 0 16px;\n      font-family: inherit;\n    }\n    .country_drop_wrap {\n      display: block;\n      padding: 8px 0;\n    }\n    .hide {\n      display: none;\n    }\n  </style>\n</head>\n<body>\n  <div id=\"can-form-area-${this.actionId}\"></div>\n  <script>\n    var observer = new MutationObserver(() => {\n      window.dispatchEvent(new CustomEvent('needsresize'))\n    })\n    observer.observe(document.body, { subtree: true, attributes: true })\n  </script>\n</body>\n</html>\n    `\n  }\n}\n\ncustomElements.define('action-network-form', ActionNetworkForm)","import './YoutubeVideo'\nimport './ActionNetworkForm'\n\nconst video = document.querySelector('youtube-video')!"]}